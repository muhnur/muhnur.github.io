<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Text to Sign Language</title>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->


  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="js/bootstrap.min.js"></script>


  <script>
  $(window).load(function() {
    //boshluqni tazilash
    var mytext = $.trim($("textarea").val());
    if (mytext != "") {
      $('textarea').val(mytext);
    }
  });


  $(document).ready(function() {

    // Start translate
    $("button").click(function(){

      var vid = document.getElementById("myMedia");
      var videoSource = '';
      var f_character = '';
      var k = 0;

      //boshluqni tazilash
      var mytext = $.trim($("textarea").val());
      if (mytext != "") {
        $('textarea').val(mytext);
      }


      //
      var words = mytext.split(" ");  //All words put into Array
      var WordCount = words.length  // Count of words
      console.log(words);
      console.log(WordCount);
      var myWordSpan = "";
      for (var i = 0; i < WordCount; i++) {
          myWordSpan += '<span id="span' + i + '">'  + words[i] + ' </span> ';
      }
      $('#mydiv').html(myWordSpan);



      function videoPlay(videoSource)
      {
          document.getElementById("mp4Source").setAttribute("src",videoSource);
          document.getElementById("myMedia").setAttribute("autoplay","true");
          document.getElementById("myMedia").load();
          document.getElementById("myMedia").play();
      }
      document.getElementById('myMedia').addEventListener('ended',myHandler,false);

      function myHandler() {
        try {
          //k++;
          f_character = words[k].substring(0, 1).toLowerCase();   // first character of the word
          videoSource = 'https://www.handspeak.com/word/' + f_character + '/' + words[k].toLowerCase() + '.mp4';

          videoPlay(videoSource);
          document.getElementById('span'+k).style.color = "blue";
          /*
          if(k == ((words.length)-1)){
            k = 0;
            videoPlay(src);
          } else {
            videoPlay(src);
          } */

        } catch (e) {
            document.getElementById('span'+k).style.color = "blue";
          console.log(e);
          //k++;
        } finally {
          k++;
        }
        }
    });

  });

  </script>



</head>
<body >


  <div class="container">
    <h1 >Hello  2</h1>
    <!-- Content here -->

    <div class="row">
      <div class="col">
        <textarea rows="6" cols="100" >again also because boy but can come deaf different drink drive eat email address excuse me family father few fingerspell food for friend get girl give good have he hearing hello help home how if Internet know like  little live locate man many me meet more my name need new no not ok old other people play please remember same say school see she should signing slow some sorry take tell texting thank you that their they think time tired toilet understand use wait water what when where which who why will with woman work write yes you your  </textarea>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <button type="button" class="btn btn-success">Success</button><br><br>
      </div>
    </div>


      <div class="row">
          <div class="col-md-6">
            <div>
              <video id="myMedia" width="400"  controls>
              <source id="mp4Source" src="https://www.handspeak.com/word/a/alter.mp4" type="video/mp4">
                Your browser does not support HTML5 video.
              </video></div>
          </div>
          <div class="col-md-6"><div id="mydiv"></div></div>
      </div>

</div>










  </body>
  </html>
